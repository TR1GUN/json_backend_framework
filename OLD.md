# JSON-Backend-Framework
:ok_woman:   
Здесь расположим Фреймворк работы с JSON-Backend   
Это обычная обвертка (API), которая содержит методы взаимодействия с нашей УСПД по протоколу Backend.   
:raising_hand:   
Зачем он нужен ? 
Чтоб упростить работы с протоколом JSON Backend   
Необходимо: Для срочной проверки QA и написания ими автотестов.
Так же может понадобиться кому-то еще, если он захочет     
В общем я думаю крутая штука.   

### Установка
Сам фреймворк представляет собой библиотеку Python, которую необходимо скачать и установить.

- Если качать ручками:
  - Необходимо скачать архив tar.gz (Вверху рядом с Clone)
  - Далее с помощью pip установить в оболочку Python - `pip install *Путь до вашего архива*/json_backend_framework-master.tar.gz`
    
- Если подтягивать зависимость автоматически через `requirements.txt`:
  - в файле прописать команду :     
    `git+https://osr-dev-git.allmonitoring.local/AutoTestHelpers/um40smart_autotests/json_backend_framework.git@master`

TODO :

Далее создать таги для взаимодействия

### Начало Работы

Для того чтоб начать пользоваться фреймворком необходимо импортировать класс и выбрать необходимый тип УСПД

И в итоге получаем наш объект класса УСПД, который УЖЕ прошел авторизацию
- Для 40 СМАРТ :

```python
from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart(ip_address='192.168.0.1')
```
- Для 31 СМАРТ :

```python
from JSON_Backend_framework import USPD

SMART = USPD.UM_31_Smart(Login='login', Password="password", ip_address='192.168.0.1')
```
Поскольку необходима авторизация, и сама УСПД, поэтому необходимо задавать 3 параметра:
- Login - `str` - Логин
- Password - `str` - Пароль
- ip_address - `str` - IP адрес УСПД



`ВАЖНО` Эти статические методы класса возвращают объект класса, который отвечает за остальное взаимодействие.
Поэтому необходимо присваивание этого экземпляра какой-нибудь переменной. 

### Основные параметры полей для взаимодействия

Каждое поле настроек содержит :

- Методы для взаимодействия
- Поля настроек для добавления информации 
- Поле `data` которое содержит приходящий ответ от УСПД
- Поле `machine_ip` Которое содержит IP адрес УСПД, c которой осуществляется взаимодействие
- Поле `result_code` Которое содержит код результата операции - [код результата операции](https://ru.wikipedia.org/wiki/%D0%A1%D0%BF%D0%B8%D1%81%D0%BE%D0%BA_%D0%BA%D0%BE%D0%B4%D0%BE%D0%B2_%D1%81%D0%BE%D1%81%D1%82%D0%BE%D1%8F%D0%BD%D0%B8%D1%8F_HTTP/ "ссылка на вики тык")
- Поле `path_url` - URL поля с которым взаимодействуем

-----------
#                                            УМ 40 СМАРТ
Класс имеет поля которые отвечают за основные разделы функционала УСПД 
Ниже представлены основные поля:

- `Settings` - Раздел "Настройки"
- `Action` - Раздел "Действия"
- `StateInfo` - Раздел "Информация о состоянии изделия"
- `Journal`  - Раздел "Журналы изделия"
- `MeterDeviceManagement`  - Раздел "Управление приборами учета"
- `MeterData` - Раздел "Данные с приборов учета"

PS :
Еще какой-то код был написан для зарядных станций, но в итоге был вырезан за ненадобностью

-----------
##                                              Settings - Настройки

Поле настроек

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Settings = SMART.Settings
```

Поле настроек имеет несколько дополнительных, уточняющих полей  
 - `DeviceSettings` - Настройки самого устройства
 - `Modem` - Настройки модема устройства (SIM карты)
 - `Servers` - Настройки серверов устройства
 - `EventSystem` - Настройки системы событий устройства
 - `Meter` - Настройки касающиеся приборов учета и данных с них
 - `Proto` - Настройки протоколов ` не используется - Функционал пока что не завезен в УСПД`

Все поля настроек имеют одинаковую структуру,
и имеют методы согласно функционалу протокола:

- `Read_Settings()` - Читаем данные - GET
- `Write_Settings()` - Добавляем на запись данные - POST    
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные из полей настроек, а если они не заполнялись, то используются данные из GET запроса
- `Rewrite_Settings()` - Перезаписываем данные - PUT      
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные из полей настроек, а если они не заполнялись, то используются данные из GET запроса
- `Delete_Settings()` - Удаляем данные - DELETE     
   - `data`: Данные в Формате JSON - Если None - то используем добавленные данные - Если их нет, то никаких данных не будет задано
    
-----------
### DeviceSettings

Настройки устройства

-----------
#### Interface_Ethernet

Настройки Ethernet
```python

Ethernet = Settings.DeviceSettings.Interface_Ethernet

```

Пример JSON который можно отправлять на запись\перезапись
```json
{"Settings": [
            {"iface": "eth0", 
              "dhcp": false, 
              "ip":"192.168.0.1", 
              "netmask": "255.255.255.1", 
              "gw": "", 
              "dns1": "", 
              "dns2": ""},
            {"iface": "eth1", 
              "dhcp": true, 
              "ip":"", 
              "netmask": "", 
              "gw": "", 
              "dns1": "", 
              "dns2": ""}
              ]}
```
Метод на удаление не предполагает использование JSON и сбрасывает настройки до настроек по умолчанию

Добавление своих элементов массива по-одному     
В классе есть поле `Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:   
Для интерфейса Ethernet 1 :
- `added_Eth_0()` - Добавление настроек для записи настроек интерфейса Ethernet 1:     
  - `dhcp` - `bool` - Настройки DHCP
  - `ip` - `str` - Настройки IP адреса
  - `netmask` - `str` - Маска подсети
  - `gateway` - `str` - Шлюз
  - `dns1` - `str` - DNS Первичный Сервер
  -  `dns2` - `str` - DNS Вторичный Сервер

- `remove_Eth_0()` -  Удаление настроек интерфейса Ethernet 1, что ввели
  
- `settings_Eth_0()` - Получить настройки Ethernet 1


Для интерфейса Ethernet 2 :
- `added_Eth_1()` - Добавление настроек для записи настроек интерфейса Ethernet 2:     
  - `dhcp` - `bool` - Настройки DHCP
  - `ip` - `str` - Настройки IP адреса
  - `netmask` - `str` - Маска подсети
  - `gateway` - `str` - Шлюз
  - `dns1` - `str` - DNS Первичный Сервер
  -  `dns2` - `str` - DNS Вторичный Сервер

- `remove_Eth_1()` -  Удаление настроек интерфейса Ethernet 2, что ввели
  
- `settings_Eth_1()` - Получить настройки Ethernet 2

-----------
#### Interface_UART
Настройки последовательных интерфейсов(UART)
```python

UART = Settings.DeviceSettings.Interface_UART
```

Пример JSON который можно отправлять на запись\перезапись
```json
{"Settings": [
            
              ]}
```
Метод на удаление не предполагает использование JSON и сбрасывает настройки до настроек по умолчанию


Добавление своих элементов массива по-одному     
В классе есть поле `Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:

Для Каждого интерфейса добавление:
- `add_Iface1_0()` - Добавление настроек для записи настроек интерфейса :
 
  - `line` - `int` -
 
  - `br` - `int` -
 
  - `size` - `int` - 
  - `parity` - `int` - 
  - `stop` - `int` - 

- `remove_Iface()` - Удаление настроек интерфейса, что ввели
    - `Iface` - `int` - Удалить из записанного списка определенный интерфейс
- `get_settings()` - Получить записанные настройки


-----------
#### Interface_DIn
Настройки дискретных входов


Функционал не завезен, но присутствует

-----------
#### Interface_DOut 
Настройки линий питания интерфейсов

```python

DOut = Settings.DeviceSettings.Interface_DOut
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': [
                      {'addr': '/dev/ttyUSB3', 'state': 'toggle'},
                      {'addr': '/dev/ttyUSB2', 'state': 'toggle'},
                      {'addr': '/dev/ttyUSB1', 'state': 'toggle'},
                      {'addr': '/dev/ttyUSB0', 'state': 'toggle'}
                      ]}
```
Метод на удаление не предполагает использование JSON и сбрасывает настройки до настроек по умолчанию

Для того чтоб не заблудиться 
в классе присутствует поле `DOut_name` которое является словарем соответствий — номеров и адресов линий питания.

В классе есть поле `Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:

Для Каждого интерфейса добавление:
- `add_State_Iface_N()` - Добавление настроек для записи настроек интерфейса :
 
  - `state` - `int` - Маркер состояния
    
- `remove_State_Iface()` - Удаление настроек интерфейса, что ввели
    - `Iface` - `int` - Удалить из записанного списка определенный интерфейс — Иначе удаляется все
- `get_settings()` - Получить записанные настройки

-----------

#### address	

Адресная книга


Функционал не завезен, но присутствует   

-----------
#### name	

Настройки имени устройства


Функционал не завезен, но присутствует

-----------

#### Time_Local
Настройки связанные с временем — Часовой пояс

```python

Time_Zone = Settings.DeviceSettings.Time_Local

```

Пример JSON который можно отправлять на запись\перезапись
```json
{
	"tz":3,
	"dst":false
}
```
Метод на удаление не предполагает использование JSON и сбрасывает настройки до настроек по умолчанию (Часовой пояс — МСК)

В классе есть поле `TimeZone` и `DST` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:

TimeZone : 
Ввод часового пояса для коррекции
- `add_TimeZone()` - Добавление часового пояса
 
  - `TimeZone` - `int` - Часовой пояс
    
- `remove_TimeZone()` - Удаление настроек, что ввели
- `get_TimeZone()` - Получить записанные настройки

DST : 
Настройка разрешения смены сезона - зима/лето (Переход на летнее время)
- `add_DST()` - Добавление настроек :
 
  - `DST` - `bool` - Маркер состояния
    
- `remove_DST()` - Удаление настроек, что ввели
- `get_DST()` - Получить записанные настройки

-----------
#### File_System
Настройки связанные с файловой системой

Функционал не завезен, но присутствует

-----------
### Modem

Настройки связанные с Модемом

-----------
#### SIM 

Настройки SIM-карт (Pin, APN)

```python

SIM = Settings.Modem.SIM
```

Пример JSON который можно отправлять на запись\перезапись
```json
{"Settings": [
     {"id": 1, "pin": "", "addr": "internet.beeline.ru", "auth": false, "login": "beeline", "password": "beeline",
      "enable": true},
     {"id": 2, "pin": "2527", "addr": "internet.beeline.ru", "auth": true, "login": "beeline", "password": "beeline",
      "enable": true}
	  ]}

```
Метод на удаление не предполагает использование JSON и сбрасывает настройки до настроек по умолчанию

Добавление своих элементов массива по-одному     
В классе есть поле `Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:   
Для интерфейса SIM 1 :
- `added_SIM_1()` - Добавление настроек для записи настроек интерфейса SIM 1:     

  -  `pin` - `int` - PIN-код SIM-карты, 4 цифры
  -  `enable` - `bool` - Разрешение подключения к точке доступа
  -  `address` - `str` - Адрес точки доступа
  -  `auth` - `bool` - Необходимость авторизации
  -  `login` - `str` - Логин
  -  `password` - `str` - Пароль
      
    
- `remove_Sim_1()` -  Удаление настроек интерфейса SIM 1, что ввели
     
  
- `settings_Sim_1()` - Получить настройки SIM 1


Для интерфейса SIM 2 :
- `added_SIM_2()` - Добавление настроек для записи настроек интерфейса SIM 2:     

  -  `pin` - `int` - PIN-код SIM-карты, 4 цифры
  -  `enable` - `bool` - Разрешение подключения к точке доступа
  -  `address` - `str` - Адрес точки доступа
  -  `auth` - `bool` - Необходимость авторизации
  -  `login` - `str` - Логин
  -  `password` - `str` - Пароль
      
    
- `remove_Sim_2()` -  Удаление настроек интерфейса SIM 2, что ввели
     
  
- `settings_Sim_2()` - Получить настройки SIM 2

-----------
### Servers
Настройки связанные с настройками серверов

-----------
#### TCP 
Настройки TCP Серверов

```python

TCP = Settings.Servers.TCP
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': [{'type': 'rtu327', 'port': '7777'}]}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

В классе есть поле `Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:

Для Каждого интерфейса добавление:
- `add_IFaceN()` - Добавление настроек для сервера транзита по интерфейсам :
  - `port` - `int` - На каком порту поднимаем
    
- `delete_server_for_port()` - Удаление настроек, что ввели по порту
    - `ports` - `int, list` - Удалить из записанного списка определенный порт — Иначе удаляется все
- `get_servers()` - Получить записанные настройки

-----------
#### SNTP 
Настройки SNTP Серверов — Сервера синхронизации времени

```python

SNTP = Settings.Servers.SNTP
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### SMTP 
Настройки SMTP Серверов — Сервера почтовых сообщений

```python

SMTP = Settings.Servers.SMTP
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### MQTT 
Настройки MQTT Серверов — Сервера MQTT брокеров

```python

MQTT = Settings.Servers.MQTT
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
### EventSystem
Настройки связанные с настройками Системы событий

-----------
#### MQTT 
Настройки  подписки на MQTT брокера

```python

MQTT = Settings.EventSystem.MQTT
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### SMTP 
Настройки отправки сообщений

```python

SMTP = Settings.EventSystem.SMTP
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### SNTP 
Настройки синхронизации времени

```python

SNTP = Settings.EventSystem.SNTP
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### Email 
Настройки отправки Email

```python

Email = Settings.EventSystem.Email
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### Manager 
Настройки Управления Системой событий

```python

Manager = Settings.EventSystem.Manager
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### Scheduler 
Настройки управления расписанием

```python

Scheduler = Settings.EventSystem.Scheduler
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### TemplatesMeterData 
Настройки сбора данных со счетчиков

```python

TemplatesMeterData = Settings.EventSystem.TemplatesMeterData
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### TemplatesMeter 
Настройки шаблонов счетчиков

```python

TemplatesMeter = Settings.EventSystem.TemplatesMeter
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### Messages 
Настройки сообщений

```python

Messages = Settings.EventSystem.Messages
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### Calendar 
Настройки календаря событий

```python

Calendar = Settings.EventSystem.Calendar
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
#### MeterPoller 
Настройки опроса счетчиков

```python

MeterPoller = Settings.EventSystem.MeterPoller
```

Пример JSON который можно отправлять на запись\перезапись
```json
{'Settings': []}

```
Метод на удаление не предполагает использование JSON и удаляет все из списка

-----------
### Meter
Настройки связанные с хранением данных приборов учета


####Table  

Таблица приборов учета
Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
MeterTable = SMART.Settings.Meter.Table
```

- `read_settings()` - Читаем данные - GET
- `write_settings()` - Добавляем на запись данные - POST    
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные
- `rewrite_settings()` - Перезаписываем данные - PUT      
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные
- `delete_settings()` - Удаляем данные - DELETE     
   - `data`: Данные в Формате JSON - Если None - то используем добавленные данные - Если их нет, то никакой idx не будет задан
    
Пример JSON который можно отправлять на запись\перезапись
```json
    {
        "Meters": [
            {
                "id": 1,
                "pId": 0,
                "typeName": "Mercury23x",
                "addr": "72",
                "passRd": "010101010101",
                "passWr": "020202020202",
                "ifaceName": "Iface1",
                "ifaceCfg": "9600,8n1",
                "rtuObjType": 3,
                "rtuObjNum": 2,
                "rtuFider": 1
            }
        ]
    }
```
Пример JSON который можно отправлять на удаление
```json
{
  Meters : {
                'id': []
             }
}
```

Добавление своих элементов массива по-одному     
В классе есть поле `Data_Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:
- `add_settings()` - Добавление настроек для записи :   
   - `MeterId` - `int - ID Счетчика. Используется для взаимодействия со счетчика в дальнейшем.
   - `typeName_Meter` - `str - Имя типа счетчика. Можно получить все типы поддержанных счетчиков через метод get_permissible_meters
   - `Interface` - `str - Имя типа подключения по Интерфейсу. Можно получить все типы поддержанных Интерфейсов через метод get_permissible_interface
   - `address` - `str` - Адрес счетчика
   - `password_to_read` - `str - Пароль доступа 1 уровня - На чтение
   - `password_to_write` - `str - Пароль доступа 2 уровня - На запись
   - `ParentId` - `int` - Id Родительского устройства. Если его нет, то ставиться 0. Значение по умолчанию - 0
   - `ifaceConfig` - `str` - Настройки интерфейса . Значение по умолчанию - '9600,8n1
   - `rtuObjType` - `int` - Тип объекта RTU . Значение по умолчанию - 0
   - `rtuObjNum` - `int` - Номер объекта RTU . Значение по умолчанию - 0
   - `rtuFider` - `int` - Фидер объекта RTU . Значение по умолчанию - 0

Поддерживаемые значения для интерфейсов :   
    - Интерфейс 1 - `Iface1`   
    - Интерфейс 2 - `Iface2`   
    - Интерфейс 3 - `Iface3`   
    - Интерфейс 4 - `Iface4`   
    - Ethernet - `Ethernet`   
    - Интерфейс концентратора - `Hub`  


Поддерживаемые значения для Счетчиков :   
    - Меркурий200 - `Mercury200`   
    - Меркурий203 - `Mercury203`  
    - Меркурий206 - `Mercury206`   
    - Меркурий23x - `Mercury23x`  
    - Меркурий234 СПОДЭС - `SPODES`   
    - СЕ102 - `SE102`   
    - СЕ102М - `SE102M`   
    - СЕ301 - `SE301`   
    - СЕ303 - `SE303`    
    - СЭБ2А - `SEB2a`   
    - СЭТ4ТМ - `SETxTM`   
    - ПСЧхТМ - `PSCHxTM`   
    - Альфа1140 - `A1140`   
    - ТОПАЗ - `TOPAZ`   
    - НЕВА1xx - `NEVA1xx`   
    - НЕВА3xx - `NEVA3xx`    
    - МИЛУР IC - `MILUR IC`   
    - Милур10x - `MILUR10x`    
    - Милур30x - `MILUR30x`    
    - СОЭ55/215 - `SOE55_215`    
    - СОЭ55/217 - `SOE55_217`     
    - СОЭ55/415 - `SOE55_415`    
    - СТЭ561 - `STE561`    
    - ИНТЕГРА10х - `INTEGRA10x`    
    - УМТВ10 - `UMTV10`    
    - Пульсар - `Pulsar`     
    - ST410 - `ST410`   


- `remove_settings()` -  Удаление добавленной записи settings для записи по ID    
  - `idx` - list or int
  
- `get_settings()` - Получаем добавленные settings

- `add_ids()` - Добавляем Device_id для запроса данных или удаления
  - `ids` - Сам Id

- `remove_ids()` - Удаление добавленной записи ids для получения/удаления записей
  - `param ids` - list or int
  
- `get_ids` - Получаем добавленные settings

-  `get_permissible_meters()` - Получаем размещенные счетчики

- `get_permissible_interface()` Получаем добавленные ids
-----------
####ArchInfo    

Таблица приборов учета
Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
MeterArchInfo = SMART.Settings.Meter.ArchInfo
```


Пример JSON который можно отправлять на запись\перезапись
```json

```
-----------
##                                  MeterData - Чтение данных приборов учета

Поле для чтения данных приборов учета

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
MeterData = SMART.MeterData
```

-----------


-----------
##                                  MeterDeviceManagement - Управление приборами учета

Поле для управления приборами учета

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
MeterDeviceManagement = SMART.MeterDeviceManagement
```
- Чтение архивных данных
- Чтение моментных показателей



-----------
####Set_Time_Meter    

Синхронизация времени прибора учета с УСПД

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Set_Time_Meter = SMART.MeterDeviceManagement.Set_Time_Meter
```
Поле имеет Только один метод, который выполняет синхронизацию времени
- `Sync()` - Синхронизация времени  - POST  
      Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные

Данные добавляются с помощью поля `Meter`

Это поле имеет свои методы:
- `set_Meter()` - Задать MeterIdx счетчика
  - `MeterIdx` - `int` - MeterIdx устройства
- `remove_Meter()` - Очистить
- `get_Meter()` - Получить сформированный JSON

-----------
####Relay    

Управление Реле

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Relay = SMART.MeterDeviceManagement.Relay
```
Поле имеет Только один метод, который выполняет установку положения Реле
- `SetRelay()` - Установка положения реле  - POST  
      Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные

Данные добавляются с помощью поля `Meter`

Это поле имеет свои методы:
- `set_Relay()` - Задать MeterIdx счетчика
  - `MeterIdx` - `int` - MeterIdx устройства
- `remove_Relay()` - Очистить
- `get_Relay_settings()` - Получить сформированный JSON
-----------
##                                              Actions - Действия

Поле для выполнения каких либо действий над устройством

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Actions = SMART.Action
```

Все поля настроек имеют одинаковую структуру, кроме рестарта
и имеют методы согласно функционалу протокола:

- `Set()` - Задаем данные - POST    
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные из полей настроек, а если они не заполнялись, то используются данные из GET запроса

-----------
####Restart    

Перезагрузка

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Restart = SMART.Action.Restart
```
Поле имеет Только один метод, который выполняет перезагрузку устройства
- `Restart()` - Перезагрузка устройства

-----------
####Set_Time    

Установка времени

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Restart = SMART.Action.Set_Time
```
Поле имеет стандартный метод

А так же свои поля управляющие переменными

- `TimeZone` - Поле для добавления Часового пояса
- `Year` - Поле для добавления года
- `Month` - Поле для добавления месяца
- `Day` - Поле для добавления числа
- `Hour` - Поле для добавления часа
- `Minute` - Поле для добавления минуты
- `Second` - Поле для добавления секунды

Все эти поля имеют свои методы для добавления, удаления и получения элеменнтов

- `add_Year()` - Установка пользовательского года в переменную времени
   - `Year` - `str/int` - Год - Формат - 2021
    
- `add_Month()` - Установка пользовательского Месяца в переменную времени
   - `Month` - `str/int` - Месяц - Формат - 02

- `add_Day()` - Установка пользовательского Дня в переменную времени
   - `Day` - `str/int` - День - Формат - 01

- `add_Hour()` - Установка пользовательского Часа в переменную времени
   - `Hour` - `str/int` - ЧАС - Формат - 24 часа - 18 или 01

- `add_Minute()` - Установка пользовательской Минуты в переменную времени
   - `Minute` - `str/int` - Минуты - Формат - 09

- `add_Second()` - Установка пользовательской Секунды в переменную времени
   - `data` - `str/int` - Секунды - Формат - 7 - '07'

- `add_Time_Zone()` - Установка пользовательского Часового пояса в переменную времени
   - `Time_Zone` - `str` - Часовой пояс - Формат +03:00


-----------
##                                              Journal - Журналы УСПД

Поле для чтения Журналов УСПД

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Journal = SMART.Journal
```

Все поля настроек имеют одинаковую структуру,
и имеют методы согласно функционалу протокола:

- `read_Journal()` - Читаем данные - GET    

-----------
####Time    

Журнал корекции времени УСПД

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Journal_Time = SMART.Journal.Time
```

-----------

####Meter_answer    

Журнал ответов прибора учета

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
Journal_Time = SMART.Journal.Meter_answer
```

-----------
##                                              StateInfo - Состояние УСПД

Поле для чтения состояния УСПД

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
StateInfo = SMART.StateInfo
```

Все поля настроек имеют одинаковую структуру,
и имеют методы согласно функционалу протокола:

- `read()` - Читаем данные - GET    

-----------
####DOut    

Чтение состояния линий питания интерфейсов УСПД

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
DOut = SMART.StateInfo.DOut
```

-----------
####Time    

Чтение состояния линий питания интерфейсов УСПД

Пример:

```python

from JSON_Backend_framework import USPD

SMART = USPD.UM_40_Smart()
DOut = SMART.StateInfo.Time
```

-----------























-----------

ВЫРЕЗАННЫЙ КОНТЕНТ
-----------
-----------
### ChargeStationTable

Таблица зарядных станций

- `read_settings()` - Читаем данные - GET
- `write_settings()` - Добавляем на запись данные - POST    
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные
- `rewrite_settings()` - Перезаписываем данные - PUT      
    Переменные:
   - `data` - `dict` , `None` - Данные в Формате JSON. Если None - то используем добавленные данные
- `delete_settings()` - Удаляем данные - DELETE     
   - `data`: Данные в Формате JSON - Если None - то используем добавленные данные - Если их нет, то никакой idx не будет задан
    
Пример JSON который можно отправлять на запись\перезапись
```json
{
  settings: {
                'addr': IP_address,
                'id': Device_idx,
                'mqttId': ID_MQTT,
                'port': IP_port,
                'type': type
            }
}
```
Пример JSON который можно отправлять на удаление
```json
{
  settings : {
                'id': []
             }
}
```

Добавление своих элементов массива по-одному     
В классе есть поле `Data_Settings` через который можно добавлять свои настройки для использования в основном классе.   
Это поле является объектом класса со своими методами.   
Методы Класса:
- `add_settings()` - Добавление настроек для записи :   
  - `Device_idx` - int - ID станции - поле  id
  - `IP_address` - str - IP адрес станции  - поле  addr
  - `IP_port` - int - IP порт станции  - поле  port
  - `ID_MQTT` - int - ID MQTT брокера - поле  mqttId
  - `type` -  str - Тип станции - По умолчанию заполняется значением ZSE-500T (Единственное поддерживаемое значение) - поле type
  

- `remove_settings()` -  Удаление добавленной записи settings для записи по ID    
  - `idx` - list or int
  
- `get_settings()` - Получаем добавленные settings

- `add_ids()` - Добавляем Device_id для запроса данных или удаления
  - `ids` - Сам Id

- `remove_ids()` - Удаление добавленной записи ids для получения/удаления записей
  - `param ids` - list or int
  
- `get_ids` - Получаем добавленные settings

-----------
### ChargeStationArchData

Таблица данных зарядных станций.
Запрашивает данные.
- `read_settings_StationParams()` - считываем данные: Состояние зарядных станций — таблица StationParams
  - `ids` - `int/list/None` - ID станций — Если None, то не формируется поле ids
  - `time_end` - `int/None` - Время конца считывания. Если None - и задано время старта — то ставиться текущая дата + 1000.  Если время старта не задано, то поле time не формируется
  - `time_start` - `int/None` - Время старта считывания. Если None - и задано время конца — то ставиться 0. Если время конца не задано, то поле time не формируется

- `read_settings_chargeProcessParams()` - считываем данные:Состояние процесса заряда — таблица chargeProcessParams
  - `ids` - `int/list/None` - ID станций — Если None, то не формируется поле ids
  - `time_end` - `int/None` - Время конца считывания. Если None - и задано время старта — то ставиться текущая дата + 1000.  Если время старта не задано, то поле time не формируется
  - `time_start` - `int/None` - Время старта считывания. Если None - и задано время конца — то ставиться 0. Если время конца не задано, то поле time не формируется

- `read_settings_chargeSessionParams()` - считываем данные:История зарядных сессий — таблица chargeSessionParams
  - `ids` - `int/list/None` - ID станций — Если None, то не формируется поле ids
  - `time_end` - `int/None` - Время конца считывания. Если None - и задано время старта — то ставиться текущая дата + 1000.  Если время старта не задано, то поле time не формируется
  - `time_start` - `int/None` - Время старта считывания. Если None - и задано время конца — то ставиться 0. Если время конца не задано, то поле time не формируется

- `read_settings()` - Формирование запроса на чтение данных в нужной таблице
  - `measure` - `str` - Обязательное значение — имя таблицы, что читаем. 
    - Допустимые значения: 
      - `chargeSessionParams` 
      - `chargeProcessParams` 
      - `stationParams` 
      - `chargeStations`
    
  - `ids` - `int/list/None` - ID станций — Если None, то не формируется поле ids
  - `time_end` - `int/None` - Время конца считывания. Если None - и задано время старта — то ставиться текущая дата + 1000.  Если время старта не задано, то поле time не формируется
  - `time_start` - `int/None` - Время старта считывания. Если None - и задано время конца — то ставиться 0. Если время конца не задано, то поле time не формируется
  
-----------













###MeterArchData    

Основной класс работы с Архивными данными 

Методы Класса:
- `read_data_to_measure()` - прочитать архивные данные вводимого типа данных:

   - `measure` - `str` - Обязательное значение - типа данных что читаем. Допустимые значения :

   - `ids` - `int/list/None` - Meter ID  - Если None, то не формируется поле ids

   - `time_end` - `int/None` - Время конца считывания. Если None - и задано время старта - то ставиться текущая дата  + 1000.  Если время старта не задано то поле time не формируется

   - `time_start`- `int/None` - Время старта считывания. Если None - и задано время конца - то ставиться 0. Если время конца не задано то поле time не формируется

   - `tags` - `None/list/str` - Тэги что запрашиваем - Если None, то тэг не ставиться, если строка - то тэг что указан в строке, если список , то список тэгов что указан в массиве.

- `get_measures()` - получение словаря всех типов данных measure в формате "measure_name":"расшифровка"

Так же можно считать нужный тип данных, обратившись по его одноименному методу в соответствующем поле класса.   

Пример : 
```python
    Elconfig = MeterArchData().Electric.ElConfig()
```
- `read()` - Отправить свой JSON запрос

   - `data` - `dict` - словарь запроса
    
Пример : 
```json
    {           "ids": [],
            "tags": [
                "A+0","A+1","A+2","A+3","A+4","A-0","A-1","A-2","A-3","A-4",
                "R+0","R+1","R+2","R+3","R+4","R-0","R-1","R-2","R-3","R-4"],
            "measures": ["ElMomentEnergy"]}
```
Поля класса:
- `Journal` - Типы данных журналов
- `Pulse` - Типы данных импульсных концентраторов
- `Digital` - Типы данных дискретных концентраторов
- `Electric` - Типы данных Электросчетчиков

При вызове функций используются все те же переменные указанные выше кроме переменной `measure`.    
При вызове функций журналов так же отсутствует переменная `tags`


Поддерживаемые типы данных (если тип данных не верен, то возвращается _None_ ):     
        
- `ElConfig` - конфигурация электросчетчика
- `PlsConfig` - конфигурация модуля дискретных вводов/выводов
- `DigConfig` - конфигурация концентратора импульсных счетчиков
- `ElMomentEnergy` - мгновенные показания энергии электросчетчика
- `ElDayEnergy` - показания электросчетчика на начало суток
- `ElMonthEnergy` - показания электросчетчика на начало месяца
- `ElDayConsEnergy` - потребление электросчетчика за сутки
- `ElMonthConsEnergy` - потребление электросчетчика за месяц
- `ElMomentQuality` - мгновенные ПКЭ
- `ElArr1ConsPower` - профили мощности первого массива профилей мощности электросчетчика
- `PlsMomentPulse` - мгновенные показания энергии концентратора импульсных счетчиков
- `PlsDayPulse` - показания концентратора импульсных счетчиков на начало суток
- `PlsMonthPulse` - показания концентратора импульсных счетчиков на начало месяца
- `PlsHourPulse` - показания на начало часа концентратора импульсных счетчиков
- `DigMomentState` - мгновенные показания модуля дискретных вводов/выводов
- `DigJournalState'` - архив изменения состояний модуля дискретных вводов/выводов
- `ElJrnlPwr` - журнал управление питанием
- `ElJrnlTimeCorr` - журнал коррекция времени электросчетчика
- `ElJrnlReset` - журнал сброс показаний
- `ElJrnlC1Init` - журнал инициализация первого массива профилей
- `ElJrnlC2Init` - журнал инициализация второго массива профилей
- `ElJrnlTrfCorr` - журнал коррекция тарификатора
- `ElJrnlOpen` - журнал открытие крышки
- `ElJrnlUnAyth` - журнал неавторизованный доступ
- `ElJrnlPwrA` - журнал управление фазой А
- `ElJrnlPwrB` - журнал управление фазой В
- `ElJrnlPwrC` - журнал управление фазой С
- `ElJrnlProg` - журнал программирование
- `ElJrnlRelay` - журнал управление реле
- `ElJrnlLimESumm` - журнал лимит суммарной энергии
- `ElJrnlLimETrf` - журнал потарифиный лимит энергии
- `ElJrnlLimETrf1` - журнал лимит энергии тарифа 1
- `ElJrnlLimETrf2` - журнал лимит энергии тарифа 2
- `ElJrnlLimETrf3` - журнал лимит энергии тарифа 3
- `ElJrnlLimETrf4` - журнал лимит энергии тарифа 4
- `ElJrnlLimUAMax` - журнал ограничение максимального напряжения фазы А
- `ElJrnlLimUAMin` - журнал ограничение минимального напряжения фазы А
- `ElJrnlLimUBMax` - журнал ограничение максимального напряжения фазы В
- `ElJrnlLimUBMin` - журнал ограничение минимального напряжения фазы В
- `ElJrnlLimUCMax` - журнал ограничение максимального напряжения фазы С
- `ElJrnlLimUCMin` - журнал ограничение минимального напряжения фазы С
- `ElJrnlLimUABMax` - журнал ограничение максимального расхождения напряжения фаз А и В
- `ElJrnlLimUABMin` - журнал ограничение минимального расхождения напряжения фаз А и В
- `ElJrnlLimUBCMax` - журнал ограничение максимального расхождения напряжения фаз В и С
- `ElJrnlLimUBCMin` - журнал ограничение минимального расхождения напряжения фаз В и С
- `ElJrnlLimUCAMax` - журнал ограничение максимального расхождения напряжения фаз С и А
- `ElJrnlLimUCAMin` - журнал ограничение минимального расхождения напряжения фаз С и А
- `ElJrnlLimIAMax` - журнал ограничение максимального тока фазы А
- `ElJrnlLimIBMax` - журнал ограничение максимального тока фазы В
- `ElJrnlLimICMax` - журнал ограничение максимального тока фазы С
- `ElJrnlLimFreqMax` - журнал ограничение максимальной частоты сети
- `ElJrnlLimFreqMin` - журнал ограничение минимальной частоты сети
- `ElJrnlLimPwr` - журнал ограничение мощности
- `ElJrnlLimPwrPP` - журнал ограничение прямой активной мощности
- `ElJrnlLimPwrPM` - журнал ограничение прямой реактивной мощности
- `ElJrnlLimPwrQP` - журнал ограничение обратной активной мощности
- `ElJrnlLimPwrQM` - журнал ограничение обратной реактивной мощности
- `ElJrnlReverce` - журнал реверс
- `PlsJrnlTimeCorr` - журнал коррекция времени концентратора импульсных счетчиков

-----------
ДЕЙСТВИЯ 

-----------
#Примеры JSON :

-----------
## :floppy_disk: Для таблицы chargeProcessParams

### POST
Запрос
```json
{"method": "post", "data": [{"table": "chargeProcessParams", "values": [
{"chargeLevel" : 2,"sessionId" : 2,"stationId" : 2,"stationTableId" : 2,"time" : 2}]}]}
```
Варианты ответа:
```json
 {"res": 0.0}
```
```json
{"error": "Income message error", "res": 74.0}
```
### GET
Запрос
```json
{"method": "get", "data": [{"table": "chargeProcessParams", "ids":[2], "time":[{"start":0, "end":9}] }]}
```
```json
{"method": "get", "data": [{"table": "chargeProcessParams", "ids": []}]}
```
```json
{"method": "get", "data": [{"table": "chargeProcessParams"}]}
```

Варианты ответа:
```json
{"data" :[{"table" : "chargeProcessParams",  "values" : [ {
 "chargeLevel" : 2, "sessionId" : 2, "stationId" : 2, "stationTableId" : 2, "time" : 2} ] } ], "res" : 0.0}
```
### PUT
Запрос
```json
{"method": "put", "data": [{"table": "chargeProcessParams", "values": [
{"chargeLevel" : 2,"sessionId" : 2,"stationId" : 2,"stationTableId" : 2,"time" : 2}]}]}

```

Варианты ответа:
```json
 {"res": 0.0}
```
```json
{"error": "Income message error", "res": 74.0}
```
### DELETE
Запрос
```json
{"method": "delete", "data": [{"table": "chargeProcessParams","ids":[1]}]}
```
```json
{"method": "delete", "data": [{"table": "chargeProcessParams"}]}
```

Варианты ответа:
```json
 {"res": 0.0}
```
```json
{"error": "Income message error", "res": 74.0}
```
-----------